language: node_js

node_js:
  - "4"
  - "6"
  - "8"
  - "node"

env:
  - PACKAGE_MANAGER=npm
  - PACKAGE_MANAGER=yarn

install: case "$PACKAGE_MANAGER" in
           npm) npm install ;;
           yarn)
             curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - ;
             echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list ;
             apt-get update ;
             apt-get install yarn ;
             yarn --pure-lockfile ;
           ;;
         esac

script: case "$PACKAGE_MANAGER" in
          npm) npm test ;;
          yarn) yarn test ;;
        esac

sudo: false
